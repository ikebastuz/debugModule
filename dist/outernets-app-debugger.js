!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("react-redux"),require("uuidv1"),require("react-detect-offline"),require("classnames")):"function"==typeof define&&define.amd?define(["react","react-redux","uuidv1","react-detect-offline","classnames"],t):(e=e||self)["outernets-app-debugger"]=t(e.React,e.reactRedux,e.uuidv1,e.reactDetectOffline,e.classNames)}(this,function(n,e,r,t,i){"use strict";var a="default"in n?n.default:n;r=r&&r.hasOwnProperty("default")?r.default:r,i=i&&i.hasOwnProperty("default")?i.default:i;var o="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function s(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function c(e,t){return e(t={exports:{}},t.exports),t.exports}var l=c(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.modelHooks=[],t.pluginMiddlewares=[],t.preStore=function(e){e.forEach(function(e){e.middleware&&t.pluginMiddlewares.push(e.middleware),e.onModel&&t.modelHooks.push(e.onModel)})},t.postStore=function(e,t){e.forEach(function(e){e.onStoreCreated&&e.onStoreCreated(t)})}});s(l);l.modelHooks,l.pluginMiddlewares,l.preStore,l.postStore;var u="object"==typeof global&&global&&global.Object===Object&&global,d="object"==typeof self&&self&&self.Object===Object&&self,f=(u||d||Function("return this")()).Symbol,h=Object.prototype,p=h.hasOwnProperty,v=h.toString,y=f?f.toStringTag:void 0;var m=Object.prototype.toString;var g="[object Null]",b="[object Undefined]",x=f?f.toStringTag:void 0;function w(e){return null==e?void 0===e?b:g:x&&x in Object(e)?function(e){var t=p.call(e,y),n=e[y];try{var r=!(e[y]=void 0)}catch(e){}var i=v.call(e);return r&&(t?e[y]=n:delete e[y]),i}(e):(t=e,m.call(t));var t}var _,k,S=(_=Object.getPrototypeOf,k=Object,function(e){return _(k(e))});var O="[object Object]",P=Function.prototype,j=Object.prototype,C=P.toString,E=j.hasOwnProperty,M=C.call(Object);var D,T,R,N=(D="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")(),"function"==typeof(R=D.Symbol)?R.observable?T=R.observable:(T=R("observable"),R.observable=T):T="@@observable",T),F={INIT:"@@redux/INIT"};function I(e,t){return function(){return t(e.apply(void 0,arguments))}}function L(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}var A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var B=Object.freeze({createStore:function e(t,n,r){var i;if("function"==typeof n&&void 0===r&&(r=n,n=void 0),void 0!==r){if("function"!=typeof r)throw Error("Expected the enhancer to be a function.");return r(e)(t,n)}if("function"!=typeof t)throw Error("Expected the reducer to be a function.");var o=t,a=n,s=[],c=s,u=!1;function l(){c===s&&(c=s.slice())}function d(){return a}function f(t){if("function"!=typeof t)throw Error("Expected listener to be a function.");var n=!0;return l(),c.push(t),function(){if(n){n=!1,l();var e=c.indexOf(t);c.splice(e,1)}}}function h(e){if(!function(e){if(null==(t=e)||"object"!=typeof t||w(e)!=O)return!1;var t,n=S(e);if(null===n)return!0;var r=E.call(n,"constructor")&&n.constructor;return"function"==typeof r&&r instanceof r&&C.call(r)==M}(e))throw Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw Error("Reducers may not dispatch actions.");try{u=!0,a=o(a,e)}finally{u=!1}for(var t=s=c,n=0;n<t.length;n++)(0,t[n])();return e}return h({type:F.INIT}),(i={dispatch:h,subscribe:f,getState:d,replaceReducer:function(e){if("function"!=typeof e)throw Error("Expected the nextReducer to be a function.");o=e,h({type:F.INIT})}})[N]=function(){var e,n=f;return(e={subscribe:function(e){if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");function t(){e.next&&e.next(d())}return t(),{unsubscribe:n(t)}}})[N]=function(){return this},e},i},combineReducers:function(e){for(var t=Object.keys(e),f={},n=0;n<t.length;n++){var r=t[n];"function"==typeof e[r]&&(f[r]=e[r])}var i,h=Object.keys(f),p=void 0;try{i=f,Object.keys(i).forEach(function(e){var t=i[e];if(void 0===t(void 0,{type:F.INIT}))throw Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===t(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+F.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}catch(e){p=e}return function(){var e,t,n,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1];if(p)throw p;for(var o=!1,a={},s=0;s<h.length;s++){var c=h[s],u=r[c],l=(0,f[c])(u,i);if(void 0===l){var d=(e=c,"Given action "+((n=(t=i)&&t.type)&&'"'+n+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.');throw Error(d)}a[c]=l,o=o||l!==u}return o?a:r}},bindActionCreators:function(e,t){if("function"==typeof e)return I(e,t);if("object"!=typeof e||null===e)throw Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),r={},i=0;i<n.length;i++){var o=n[i],a=e[o];"function"==typeof a&&(r[o]=I(a,t))}return r},applyMiddleware:function(){for(var e=arguments.length,c=Array(e),t=0;t<e;t++)c[t]=arguments[t];return function(s){return function(e,t,n){var r,i=s(e,t,n),o=i.dispatch,a={getState:i.getState,dispatch:function(e){return o(e)}};return r=c.map(function(e){return e(a)}),o=L.apply(void 0,r)(i.dispatch),A({},i,{dispatch:o})}}},compose:L}),H=c(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.composeEnhancers=function(e){return void 0===e&&(e={}),"object"==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(e):B.compose}});s(H);H.composeEnhancers;var W=c(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.includes("/")}});s(W);var z=c(function(e,a){var n=o&&o.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(a,"__esModule",{value:!0});var r=B.combineReducers,t={};a.createReducer=function(n,r){return function(e,t){return void 0===e&&(e=r),"function"==typeof n[t.type]?n[t.type](e,t.payload,t.meta):e}},a.createModelReducer=function(e){var t,n=e.name,r=e.reducers,i=e.state,o={};return Object.keys(r||{}).forEach(function(e){var t=W.default(e)?e:n+"/"+e;o[t]=r[e]}),(t={})[n]=a.createReducer(o,i),t},a.mergeReducers=function(e){return void 0===e&&(e={}),t=n({},t,e),Object.keys(t).length?r(t):function(e){return e}},a.initReducers=function(e,t){r=t.combineReducers||r,a.mergeReducers(e.reduce(function(e,t){return n({},a.createModelReducer(t),e)},t.reducers))},a.createRootReducer=function(n){void 0===n&&(n={});var r=a.mergeReducers();return Object.keys(n).length?function(e,t){return r(n[t.type]?(0,n[t.type])(e,t):e,t)}:r}});s(z);z.createReducer,z.createModelReducer,z.mergeReducers,z.initReducers,z.createRootReducer;var K=c(function(e,c){var u;Object.defineProperty(c,"__esModule",{value:!0}),c.initStore=function(e){var t=e.redux,n=void 0===t.initialState?{}:t.initialState,r=t.createStore||B.createStore,i=z.createRootReducer(u=t.rootReducers),o=l.pluginMiddlewares.concat(t.middlewares||[]),a=B.applyMiddleware.apply(void 0,o),s=H.composeEnhancers(t.devtoolOptions).apply(void 0,(t.enhancers||[]).concat([a]));return c.store=r(i,n,s),c.store},c.createReducersAndUpdateStore=function(e){z.mergeReducers(z.createModelReducer(e)),c.store.replaceReducer(z.createRootReducer(u))}});s(K);K.initStore,K.store,K.createReducersAndUpdateStore;var X=c(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){}});s(X);var q=c(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(t){X.default([[!t,"model config is required"],[!t.name||"string"!=typeof t.name,'model "name" [string] is required'],[void 0===t.state,'model "state" is required']]),l.modelHooks.forEach(function(e){return e(t)})};t.initModelHooks=function(e){e.forEach(function(e){return n(e)})},t.createModel=function(e){n(e),K.createReducersAndUpdateStore(e)}});s(q);q.initModelHooks,q.createModel;var U=c(function(e,t){var a,s=o&&o.__awaiter||function(o,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function r(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,r)}i((c=c.apply(o,a||[])).next())})},c=o&&o.__generator||function(n,r){var i,o,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&t[0]?"return":t[0]?"throw":"next"])&&!(a=a.call(o,t[1])).done)return a;switch(o=0,a&&(t=[0,a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},u=o;Object.defineProperty(t,"__esModule",{value:!0}),t.default={expose:{createDispatcher:function(i,o){return function(n,r){return s(u,void 0,void 0,function(){var t;return c(this,function(e){return t={type:i+"/"+o},void 0!==n&&(t.payload=n),void 0!==r&&(t.meta=r),[2,a(t)]})})}},dispatch:function(e){return a(e)}},init:function(e){var n=e.dispatch,r=e.createDispatcher,i=e.validate;return{onStoreCreated:function(e){a=e.dispatch},onModel:function(t){n[t.name]={},Object.keys(t.reducers||{}).forEach(function(e){i([[!!e.match(/\/.+\//),"Invalid reducer name ("+t.name+"/"+e+")"],["function"!=typeof t.reducers[e],"Invalid reducer ("+t.name+"/"+e+"). Must be a function"]]),n[t.name][e]=r(t.name,e)})}}}}});s(U);var V=c(function(e,t){var a=o&&o.__awaiter||function(o,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function r(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,r)}i((c=c.apply(o,a||[])).next())})},s=o&&o.__generator||function(n,r){var i,o,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&t[0]?"return":t[0]?"throw":"next"])&&!(a=a.call(o,t[1])).done)return a;switch(o=0,a&&(t=[0,a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},c=o;Object.defineProperty(t,"__esModule",{value:!0}),t.default={expose:{effects:{}},init:function(e){var i=e.effects,n=e.dispatch,r=e.createDispatcher,o=e.validate;return{onModel:function(t){Object.keys(t.effects||{}).forEach(function(e){o([[!!e.match(/\//),"Invalid effect name ("+t.name+"/"+e+")"],["function"!=typeof t.effects[e],"Invalid effect ("+t.name+"/"+e+"). Must be a function"]]),i[t.name+"/"+e]=t.effects[e].bind(n[t.name]),n[t.name][e]=r(t.name,e),n[t.name][e].isEffect=!0})},middleware:function(r){return function(n){return function(t){return a(c,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return t.type in i?[4,n(t)]:[3,3];case 1:return e.sent(),[4,i[t.type](t.payload,r.getState(),t.meta)];case 2:return e.sent(),[3,4];case 3:return[2,n(t)];case 4:return[2]}})})}}}}}}});s(V);var Y=c(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=[U.default,V.default]});s(Y);var G=c(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,i){return e.reduce(function(e,t){var n=t.init;if(n){var r=n(i);i.validate([[r.onStoreCreated&&"function"!=typeof r.onStoreCreated,"Plugin onStoreCreated must be a function"],[r.onModel&&"function"!=typeof r.onModel,"Plugin onModel must be a function"],[r.middleware&&"function"!=typeof r.middleware,"Plugin middleware must be a function"]]),e.push(r)}return e},[])}});s(G);var Z=c(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n){return Object.keys(n).reduce(function(t,r){var e=n[r].reducers;return Object.keys(void 0===e?{}:e).filter(function(e){return!W.default(e)}).forEach(function(e){var n=r+"/"+e;t[n]=function(e,t){return{type:n,payload:e,meta:t}}}),t},{})}});s(Z);var J=c(function(e,t){var n=o&&o.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.reduce(function(e,t){return n({},e,t.expose||{})},{validate:X.default})}});s(J);var Q=c(function(e,t){var n=o&&o.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t){return Object.keys(t).map(function(e){return n({name:e},t[e])})}});s(Q);var $=c(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Array.isArray(e)||"object"!=typeof e}});s($);var ee=c(function(e,t){var n=o&&o.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){return t?n({},t,e||{}):e||{}};t.default=function(e){return(e.plugins||[]).reduce(function(e,t){return t.config&&(e.models=r(e.models,t.config.models),t.config.plugins&&(e.plugins=e.plugins.concat(t.config.plugins)),t.config.redux&&(e.redux.initialState=r(e.redux.initialState,t.config.redux.initialState),e.redux.reducers=r(e.redux.reducers,t.config.redux.reducers),e.redux.rootReducers=r(e.redux.rootReducers,t.config.redux.reducers),t.config.redux.enhancers&&(e.redux.enhancers=e.redux.enhancers.concat(t.config.redux.enhancers)),e.redux.combineReducers=e.redux.combineReducers||t.config.redux.combineReducers,e.redux.createStore=e.redux.createStore||t.config.redux.createStore)),e},e)}});s(ee);var te=c(function(e,t){var s=o&&o.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){void 0===e&&(e={}),e=s({},e,{models:e.models||{},redux:e.redux||{}}),X.default([[e.plugins&&!Array.isArray(e.plugins),"init config.plugins must be an array"],[e.models&&$.default(e.models),"init config.models must be an object"],[e.redux.reducers&&$.default(e.redux.reducers),"init config.redux.reducers must be an object"],[e.redux.middlewares&&!Array.isArray(e.redux.middlewares),"init config.redux.middlewares must be an array"],[e.redux.enhancers&&!Array.isArray(e.redux.enhancers),"init config.redux.enhancers must be an array of functions"],[e.redux.combineReducers&&"function"!=typeof e.redux.combineReducers,"init config.redux.combineReducers must be a function"],[e.redux.createStore&&"function"!=typeof e.redux.createStore,"init config.redux.createStore must be a function"]]),e=s({},e,{redux:s({},e.redux,{devtoolOptions:s({actionCreators:Z.default(e.models)},e.redux.devtoolOptions||{})})});var t=ee.default(e),n=Y.default.concat(t.plugins||[]),r=J.default(n),i=G.default(n,r);l.preStore(i);var o=Q.default(t.models);q.initModelHooks(o),z.initReducers(o,t.redux);var a=K.initStore(t);return l.postStore(i,a),a.dispatch=Y.default[0].expose.dispatch,a}});s(te);var ne=c(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){}});s(ne);var re=c(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.init=te.default,t.model=q.createModel;var n=U.default.expose.dispatch;t.dispatch=n;var r=function(){return ne.default("getState import will be removed in @rematch/core@v1.0.0"),K.store.getState()};t.getState=r,t.default={dispatch:n,getState:r,init:te.default,model:q.createModel}}),ie=(s(re),re.init),oe=(re.model,re.dispatch);re.getState;function ae(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function se(s){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=s.apply(e,a);function i(e){ae(r,t,n,i,o,"next",e)}function o(e){ae(r,t,n,i,o,"throw",e)}i(void 0)})}}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t,n){return t&&ue(e.prototype,t),n&&ue(e,n),e}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){de(t,e,n[e])})}return t}function he(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?ye(e):t}function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function be(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function xe(e){return we.apply(this,arguments)}function we(){return(we=se(regeneratorRuntime.mark(function e(n){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new WebSocket("ws://localhost:9090")).onmessage=function(e){var t=e.data;return n(JSON.parse(t))},t.onclose=function(){return setTimeout(function(){return xe(n)},1e3)},t.onerror=function(e){return console.error("Socket error | ".concat(e))},e.abrupt("return",t);case 8:e.prev=8,e.t0=e.catch(0),console.error("Socket error | ".concat(e.t0)),setTimeout(function(){return xe(n)},1e3);case 12:case"end":return e.stop()}},e,null,[[0,8]])}))).apply(this,arguments)}function _e(e,t){var n=!1;return function(){n||(e.apply(void 0,arguments),n=!0,setTimeout(function(){return n=!1},t))}}var ke,Se={state:{data:null},reducers:{setState:function(e,t){return fe({},e,{data:t})}},effects:{subscribe:(ke=se(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{xe(_e(function(e){oe.vision.setState(e)},Math.floor(1e3/30)))}catch(e){console.info(e.message)}case 1:case"end":return e.stop()}},e)})),function(){return ke.apply(this,arguments)})}};var Oe=function(){try{return JSON.parse(decodeURIComponent(window.location.search.slice(1)))}catch(e){return null}},Pe=ie({models:{vision:Se,view:{state:{ready:!1,layout:null},reducers:{setState:function(e,t){return fe({},e,t)},setLayout:function(e,t){return fe({},e,{layout:t})}},effects:{}},cvEvents:{state:{data:{}},reducers:{setState:function(e,t){return{data:t}}},effects:{subscribe:function(){try{r=_e(function(e){oe.cvEvents.setState(e)},200),e=function(e){return n=r,void((t=e).data&&"CV_SNAPSHOT_V2"===t.data[1].type&&n(t.data[1].payload));var t,n},window.addEventListener("message",e)}catch(e){console.info(e.message)}var r,e}}}}});function je(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}je(".styles_container__sqF8w {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  position: absolute;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  font-size: 8vh;\n  word-break: normal;\n  z-index: 1;\n  overflow: hidden;\n}\n\n.styles_skeletonBone__2fjNL {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  animation: styles_blink__2S9t2 0.1s step-start 0s infinite;\n}\n\n.styles_boneLine__1DHJ5 {\n  stroke-width: 0.5%;\n  animation: styles_blink__2S9t2 0.1s step-start 0s infinite;\n}\n\n.styles_tag__2dMLI {\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  font-size: 14px;\n  z-index: 2;\n  transform: translateX(-50%) translateY(-50%);\n  padding: 1em;\n  text-align: center;\n}\n\n.styles_eyeDistStyleClose__2Y6Fg {\n  margin: 0 0 0 10px;\n  background-color: #28a745;\n  color: #fff;\n  padding: 10px;\n}\n\n.styles_eyeDistStyleFar__16v-D {\n  margin: 0 0 0 10px;\n  background-color: #dc3545;\n  color: #fff;\n  padding: 10px;\n}\n\n.styles_skeletonNode__3Z0lH {\n  width: 3vh;\n  height: 3vh;\n  border-radius: 50%;\n  position: absolute;\n  background: black;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  font-size: 16px;\n  z-index: 2;\n  transform: translateX(-50%) translateY(-50%);\n}\n\n.styles_cvFaceBox__qlkxG {\n  border: 5px solid #000;\n  position: absolute;\n}\n\n.styles_cvFaceData__31f3O {\n  font-size: 40% !important;\n  font-weight: bold;\n  margin: 105% 0 0 0;\n}\n");var Ce=[[0,1],[1,2],[2,3],[3,4],[1,5],[5,6],[6,7],[1,11],[1,8],[8,11],[14,15],[0,14],[0,15],[0,16],[0,17],[8,9],[9,10],[11,12],[12,13]],Ee=[0,14,15,16,17],Me=function(){function t(e){ce(this,t),(this.cvs=e)&&(this.ctx=e.getContext("2d")),this.persons={},this.ticksToLoosePerson=20,this.personsCacheLength=20,this.tagShift=.1,this.colorCursor=0,this.newPersonMinDist=.15,this.falseDetectSnaps=3,this.debugmode=!1,this.addPalms=!1,this.maxIncomePersons=5,this.luminanceDensity=100,this.weights={nodeDistances:1,massCenterPredictedDistances:1,luminanceDiff:2},this.luminanceWeights={red:.299,green:.587,blue:.114},this.snapDistCache={},this.snapCMPredictCache={},this.snapLuminanceCache={},this.skeletonDrawer=new Ne}return le(t,[{key:"feed",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=performance.now();if(0<n.length&&Object.keys(this.persons).map(function(e){n.includes(e)||delete t.persons[e]}),this.snapDistCache={},this.snapCMPredictCache={},this.snapLuminanceCache={},e=this.filterIncomingData(e),0===Object.keys(this.persons).length)for(var i in e)this.initPerson(e[i]);else{var o=this.calcCombos(e),a=this.pickBestCombo(o);this.mapCvDataToPersons(e,a),this.debugmode&&console.log(o)}var s=performance.now();this.debugmode&&console.warn("CALC TIME = ".concat(s-r))}},{key:"getFeed",value:function(){var e={};for(var t in this.persons)this.persons[t].cache.length>this.falseDetectSnaps&&(e[t]=this.persons[t].lastSnap.nodes);return e}},{key:"initPerson",value:function(e){var t=r(),n=this.genSnapShot(e,t);this.persons[t]={cache:[n],lastSnap:n,missedTicks:0,missing:!1,color:Re[this.colorCursor]},this.colorCursor=this.colorCursor===Re.length-1?0:this.colorCursor+1}},{key:"genSnapShot",value:function(e,t){this.addPalms&&(e=this.injectPalms(e));var n=this.calcVector(e,t),r=this.massCenter(e),i={nodes:e,massCenter:r,vector:n,massCenterPredict:this.massCenterPredict(r,n,t),bones:this.getBones(e),tagPos:this.getTagpos(e)};return this.cvs&&this.ctx&&(i.luminance=this.getPersonLuminance(e)),i}},{key:"filterIncomingData",value:function(t){return t=Object.assign({},Object.values(t).sort(this.sortCVData)),Object.keys(t).length>this.maxIncomePersons&&(t=Object.keys(t).map(function(e){return t[e]}).slice(0,this.maxIncomePersons)),t}},{key:"sortCVData",value:function(e,t){return Object.keys(t).length-Object.keys(e).length}},{key:"calcCombos",value:function(n){var r=this;return this.getAllPermutations(Object.keys(this.persons),Object.keys(n)).map(function(e){var t={combo:e,values:{nodeDistances:r.calcNodeDistances(e,n),massCenterPredictedDistances:r.calcMassCenterPredictedDistances(e,n)}};return r.cvs&&r.ctx&&(t.values.luminanceDiff=r.calcLuminanceDiff(e,n)),t})}},{key:"injectPalms",value:function(e){return e[3]||e[6]?(e=this.predictPalm(e,4),e=this.predictPalm(e,7)):e}},{key:"predictPalm",value:function(e,t){return e[t]&&(e[11*t]={x:e[t].x+.2*(e[t].x-e[t-1].x),y:e[t].y+.2*(e[t].y-e[t-1].y),score:1}),e}},{key:"calcMassCenterPredictedDistances",value:function(e,t){var n=0;for(var r in e)if(this.snapCMPredictCache["".concat(r,"_").concat(e[r])])n+=this.snapCMPredictCache["".concat(r,"_").concat(e[r])];else{var i=this.lastSnapShot(r);if(!i.massCenterPredict)return 0;var o=this.distBetweenNodes(i.massCenterPredict,this.massCenter(t[e[r]]));n+=o,this.snapCMPredictCache["".concat(r,"_").concat(e[r])]=o}return n}},{key:"calcLuminanceDiff",value:function(e,t){var n=0;for(var r in e)if(this.snapLuminanceCache["".concat(r,"_").concat(e[r])])n+=this.snapLuminanceCache["".concat(r,"_").concat(e[r])];else{var i=Math.abs(this.getPersonLuminance(t[e[r]])-this.lastSnapShot(r).luminance);n+=this.snapLuminanceCache["".concat(r,"_").concat(e[r])]=i}return n}},{key:"calcNodeDistances",value:function(e,t){var n=0;for(var r in e)if(this.snapDistCache["".concat(r,"_").concat(e[r])])n+=this.snapDistCache["".concat(r,"_").concat(e[r])];else{var i=this.distBetweenSnapshots(this.lastSnapShot(r).nodes,t[e[r]]);n+=this.snapDistCache["".concat(r,"_").concat(e[r])]=i}return n}},{key:"pickBestCombo",value:function(e){for(var t=0,n=null,r=0;r<e.length;r++){var i=0;for(var o in e[r].values)i+=e[r].values[o]*this.weights[o];(null===n||i<n)&&(n=i,t=r)}return e[t].combo}},{key:"getBoundingBox",value:function(e){var t=!1,n=!1,r=!1,i=!1;for(var o in e)(!t||e[o].x<t)&&(t=e[o].x),(!n||e[o].y<n)&&(n=e[o].y),(!r||e[o].x>r)&&(r=e[o].x),(!i||e[o].y>i)&&(i=e[o].y);return[t,n,r,i]}},{key:"getPersonLuminance",value:function(e){var t=this.getBoundingBox(e);try{var n=this.ctx.getImageData(this.percent2pix(t[0]),this.percent2pix(t[1],!0),this.percent2pix(t[2])-this.percent2pix(t[0]),this.percent2pix(t[3],!0)-this.percent2pix(t[1],!0));return this.getImageLuminance(n.data)}catch(e){return console.warn("Tracker ERROR | Luminance calc: ".concat(e)),1}}},{key:"getImageLuminance",value:function(e){for(var t=0,n=0;n<e.length;n+=4*this.luminanceDensity){var r=0;n%4==0?r=this.luminanceWeights.red:n%4==1?r=this.luminanceWeights.green:n%4==2&&(r=this.luminanceWeights.blue),t+=r*e[n]}return t/(e.length/(4*this.luminanceDensity))/255}},{key:"getBones",value:function(t){return De.filter(function(e){return t[e[0]]&&t[e[1]]}).map(function(e){return{x1:t[e[0]].x,y1:t[e[0]].y,x2:t[e[1]].x,y2:t[e[1]].y}})}},{key:"getTagpos",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=Te[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(e[a])return{x:e[a].x,y:e[a].y-this.tagShift}}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return!1}},{key:"getAllPermutations",value:function(r,i){var o=r.length>i.length;return(o?e(r,i.length):e(i,r.length)).map(function(e){return e.reduce(function(e,t,n){return o?e[t]=i[n]:e[r[n]]=t,e},{})});function e(e,a){var s=[];return function e(t,n,r){if(t.length)for(var i=0;i<t.length;i++){r[n]=t[i];var o=be(t);o.splice(i,1),e(o,n+1,r)}else s.push(r.slice(0,a))}(e,0,[]),s}}},{key:"massCenterPredict",value:function(e,t,n){if(this.persons[n]&&0!==this.persons[n].cache.length){var r=this.persons[n].cache.length,i=Math.tan(t.angle*Math.PI/180),o=t.speed/r,a=1/(1+i),s=o*a,c=o*(1-a);return 0<t.angle&&t.angle<=90?(s=-1*Math.abs(s),c=Math.abs(c)):90<t.angle&&t.angle<=180?(s=Math.abs(s),c=Math.abs(c)):t.angle<0&&-90<=t.angle?(s=-1*Math.abs(s),c=-1*Math.abs(c)):t.angle<-90&&-180<=t.angle&&(s=Math.abs(s),c=-1*Math.abs(c)),{x:e.x+s,y:e.y+c}}return!1}},{key:"calcVector",value:function(e,t){var n=this.firstSnapShot(t);if(n){var r=ge(this.overLappedSnapShots(n.nodes,e),2),i=r[0],o=r[1],a=this.massCenter(i),s=this.massCenter(o);return{speed:this.distBetweenNodes(a,s),angle:180*Math.atan2(s.y-a.y,-1*(s.x-a.x))/Math.PI}}return!1}},{key:"overLappedSnapShots",value:function(e,t){var n={},r={};for(var i in e)t[i]&&(n[i]=e[i]);for(var o in t)e[o]&&(r[o]=t[o]);return[n,r]}},{key:"lastSnapShot",value:function(e){return!!this.persons[e]&&this.persons[e].cache[this.persons[e].cache.length-1]}},{key:"firstSnapShot",value:function(e){return!!this.persons[e]&&this.persons[e].cache[0]}},{key:"massCenter",value:function(e){var t=0,n=0;for(var r in e)t+=e[r].x,n+=e[r].y;return{x:t/Object.keys(e).length,y:n/Object.keys(e).length}}},{key:"mapCvDataToPersons",value:function(e,t){var n=[];for(var r in this.persons)t[r]?(this.pushSnapToPerson(r,e[t[r]]),n.push(t[r])):this.handlePersonMiss(r);for(var i in e)!n.includes(i)&&this.checkFalseDuplicates(e[i])&&this.initPerson(e[i])}},{key:"checkFalseDuplicates",value:function(e){for(var t in this.persons){var n=0;if((n+=this.distBetweenSnapshots(e,this.lastSnapShot(t).nodes)*this.weights.nodeDistances)<this.newPersonMinDist)return!1}return!0}},{key:"handlePersonMiss",value:function(e){this.persons[e].missedTicks++,this.persons[e].missing=!0,(this.persons[e].cache.length<this.falseDetectSnaps||this.persons[e].missedTicks>this.ticksToLoosePerson)&&delete this.persons[e]}},{key:"pushSnapToPerson",value:function(e,t){var n=this.genSnapShot(t,e);this.persons[e].cache.push(n),this.persons[e].lastSnap=n,this.persons[e].missing=!1,this.persons[e].missedTicks=0,this.persons[e].cache.length>this.personsCacheLength&&this.persons[e].cache.shift()}},{key:"distBetweenSnapshots",value:function(e,t){var n={},r=0,i=0;for(var o in e)t[o]&&(n[o]=this.distBetweenNodes(e[o],t[o]));if(0<Object.keys(n).length){for(var a in n)r+=n[a],i++;return r/i}return!1}},{key:"distBetweenNodes",value:function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}},{key:"percent2pix",value:function(e){return 1<arguments.length&&void 0!==arguments[1]&&arguments[1]?e*this.cvs.height:e*this.cvs.width}},{key:"drawSkeleton",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.skeletonDrawer.draw(e,this.persons,t)}}]),t}(),De=[[0,1],[1,2],[2,3],[3,4],[1,5],[5,6],[6,7],[5,11],[2,8],[8,11],[14,15],[0,14],[0,15],[0,16],[0,17],[8,9],[9,10],[11,12],[12,13]],Te=[0,14,15,16,17],Re=["#3333cc","#2E86C1","#7D3C98","#CA6F1E","#1E8449"],Ne=function(){function e(){ce(this,e)}return le(e,[{key:"percent2pix",value:function(e){return 1<arguments.length&&void 0!==arguments[1]&&arguments[1]?e*this.cvs.height:e*this.cvs.width}},{key:"draw",value:function(e,t,n){for(var r in this.cvs||(this.cvs=e,this.ctx=this.cvs.getContext("2d")),t)if(!(t[r].cache.length<2)){var i=t[r].lastSnap;if(n.drawTags&&(this.ctx.font="14px Arial",this.ctx.textAlign="center",this.ctx.fillStyle=t[r].color,this.ctx.fillRect(this.percent2pix(i.tagPos.x)-150,this.percent2pix(i.tagPos.y,!0),300,30),this.ctx.fillStyle="#FFFFFF",this.ctx.save(),this.ctx.scale(-1,1),this.ctx.fillText(r,-this.percent2pix(i.tagPos.x),this.percent2pix(i.tagPos.y,!0)+20),this.ctx.restore()),n.drawBones){var o=!0,a=!1,s=void 0;try{for(var c,u=i.bones[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var l=c.value;this.ctx.beginPath(),this.ctx.lineWidth=10,this.ctx.moveTo(this.percent2pix(l.x1),this.percent2pix(l.y1,!0)),this.ctx.lineTo(this.percent2pix(l.x2),this.percent2pix(l.y2,!0)),this.ctx.strokeStyle=t[r].color,this.ctx.stroke()}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}if(n.drawNodes)for(var d in i.nodes){var f=this.percent2pix(i.nodes[d].x),h=this.percent2pix(i.nodes[d].y,!0);this.ctx.beginPath(),this.ctx.arc(f,h,this.percent2pix(.01),0,2*Math.PI),this.ctx.fillStyle=t[r].color,this.ctx.fill(),this.ctx.closePath(),this.ctx.fillStyle="#FFFFFF",this.ctx.save(),this.ctx.scale(-1,1),this.ctx.fillText(d,-f,h+3),this.ctx.restore()}if(n.drawMassCenter&&(this.ctx.fillStyle="#000",this.ctx.fillRect(this.percent2pix(i.massCenter.x)-15,this.percent2pix(i.massCenter.y,!0)-15,30,30),this.ctx.fillStyle="#FFFFFF",this.ctx.save(),this.ctx.scale(-1,1),this.ctx.fillText("M",-this.percent2pix(i.massCenter.x),this.percent2pix(i.massCenter.y,!0)+3),this.ctx.restore(),this.ctx.fillStyle="green",this.ctx.fillRect(this.percent2pix(i.massCenterPredict.x)-15,this.percent2pix(i.massCenterPredict.y,!0)-15,30,30),this.ctx.fillStyle="#FFFFFF",this.ctx.save(),this.ctx.scale(-1,1),this.ctx.fillText("P",-this.percent2pix(i.massCenterPredict.x),this.percent2pix(i.massCenterPredict.y,!0)+3),this.ctx.restore()),n.drawVector){var p=this.percent2pix(i.vector.speed);30<p&&(this.ctx.save(),this.ctx.translate(this.percent2pix(i.massCenter.x),this.percent2pix(i.massCenter.y,!0)),this.ctx.scale(-1,1),this.ctx.rotate(i.vector.angle*Math.PI/180),this.ctx.beginPath(),this.ctx.lineWidth=5,this.ctx.moveTo(0,-8),this.ctx.lineTo(p-20,-8),this.ctx.lineTo(p-20,-16),this.ctx.lineTo(p,0),this.ctx.lineTo(p-20,16),this.ctx.lineTo(p-20,8),this.ctx.lineTo(0,8),this.ctx.lineTo(0,-8),this.ctx.strokeStyle=t[r].color,this.ctx.fill(),this.ctx.stroke(),this.ctx.restore())}}}}]),e}(),Fe=e.connect(function(e){return{vision:e.vision,view:e.view,cvEvents:e.cvEvents}})(function(e){function t(){var e;return ce(this,t),de(ye(e=me(this,pe(t).call(this))),"parseStyle",function(e){var t=e.width,n=e.height,r=e.top,i=e.left;return{width:"".concat(t,"px"),height:"".concat(n,"px"),top:"".concat(r,"px"),left:"".concat(i,"px")}}),e.state={nodes:{},bones:{},tags:[],colors:["#007bff","#6c757d","#ffc107","#17a2b8"],tracker:!1,updated:!1},e.cvData={},e.cvTimeout=null,e.layout=null,e}return he(t,n.Component),le(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;!this.state.updated&&e.view.layout&&this.setState({updated:!0});var o,i,a,n={},r={},s=[];e.vision.data&&Object.values(e.vision.data).length&&(this.state.tracker.feed(e.vision.data),n=this.state.tracker.persons,i=n,a={},Object.keys(i).map(function(n){var r=[];Ce.forEach(function(e){var t=i[n].lastSnap.nodes;t[e[0]]&&t[e[1]]&&r.push({x1:t[e[0]].x,y1:t[e[0]].y,x2:t[e[1]].x,y2:t[e[1]].y})}),a[n]=r}),r=a,o=n,s=Object.keys(o).map(function(e){for(var t=0,n=Ee;t<n.length;t++){var r=n[t],i=o[e].lastSnap.nodes;if(i[r])return Object.assign({personInd:e,eyeDist:i[15]&&i[14]?Math.hypot(i[15].x-i[14].x,i[15].y-i[14].y):0},i[r])}return!1})),clearTimeout(this.cvTimeout),this.cvData=e.cvEvents,this.cvTimeout=setTimeout(function(){t.cvData={}},3e3),this.setState({nodes:n,bones:r,tags:s})}},{key:"componentDidMount",value:function(){var e=new Me;e.addPalms=!0,this.setState({tracker:e})}},{key:"absPosX",value:function(e){return"".concat(100-100*e,"%")}},{key:"absPosY",value:function(e){return"".concat(100*e,"%")}},{key:"drawNodes",value:function(){var o=this;return Object.keys(this.state.nodes).map(function(n,r){var i=o.state.nodes[n].lastSnap.nodes;return o.state.nodes[n].missing?null:Object.keys(i).map(function(e){var t={top:o.absPosY(i[e].y),left:o.absPosX(i[e].x),backgroundColor:o.state.colors[r%o.state.colors.length]};return a.createElement("div",{style:t,className:"styles_skeletonNode__3Z0lH",key:"".concat(n,"_").concat(e)},e)})})}},{key:"drawBones",value:function(){var r=this;return Object.keys(this.state.nodes).map(function(e,n){return r.state.nodes[e].missing?null:r.state.bones[e].map(function(e,t){return a.createElement("svg",{key:"bone_".concat(n,"_").concat(t),className:"styles_skeletonBone__2fjNL",xmlns:"http://www.w3.org/2000/svg"},a.createElement("line",{className:"styles_boneLine__1DHJ5",x1:r.absPosX(e.x1),y1:r.absPosY(e.y1),x2:r.absPosX(e.x2),y2:r.absPosY(e.y2),stroke:r.state.colors[n%r.state.colors.length]}))})})}},{key:"drawTags",value:function(){var i=this;return this.state.tags.map(function(e,t){if(e){var n={top:"".concat(100*e.y-15,"%"),left:i.absPosX(e.x),backgroundColor:i.state.colors[t%i.state.colors.length]},r=Math.floor(e.eyeDist*(i.props.view.layout?i.props.view.layout.width:window.innerWidth));return a.createElement("p",{className:"styles_tag__2dMLI",key:t,style:n},e.personInd,a.createElement("span",{className:120<=r?"styles_eyeDistStyleClose__2Y6Fg":"styles_eyeDistStyleFar__16v-D"},r))}})}},{key:"drawCVData",value:function(){var r=this;return this.cvData.data&&this.cvData.data.currentFaces&&this.cvData.data.currentFaces.length?this.cvData.data.currentFaces.map(function(e,t){var n={top:r.absPosY(1-e.lastPosition[0]-e.height/2),left:r.absPosX(e.lastPosition[1]+e.width/2),width:"".concat(100*e.width,"%"),height:"".concat(100*e.height,"%"),borderColor:"male"==e.gender?"blue":"red",color:"male"==e.gender?"blue":"red"};return a.createElement("div",{className:"styles_cvFaceBox__qlkxG",key:"cvface_".concat(t),style:n},a.createElement("p",{className:"styles_cvFaceData__31f3O"},e.gender," (",e.age,")"))}):null}},{key:"render",value:function(){var e={};return e=this.state.updated&&!this.layout?this.layout=this.parseStyle(this.props.view.layout):this.layout,a.createElement("div",{className:"styles_container__sqF8w",style:e},this.drawNodes(),this.drawBones(),this.drawTags(),this.drawCVData())}}]),t}()),Ie="styles_detector__zl5vF";je(".styles_detector__zl5vF {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 3vw;\n  height: 3vw;\n  border-radius: 50%;\n}\n\n.styles_online__3mUkn {\n  background: #28a745;\n}\n\n.styles_offline__3Gg47 {\n  background: #dc3545;\n}\n");var Le=function(){return a.createElement(a.Fragment,null,a.createElement(t.Online,null,a.createElement("div",{className:i(Ie,"styles_online__3mUkn")})),a.createElement(t.Offline,null,a.createElement("div",{className:i(Ie,"styles_offline__3Gg47")})))};je(".styles_video__BKZ2H {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  object-fit: cover;\n  transform: rotateY(180deg);\n  background-color: #fff;\n  display: none;\n}\n\n.styles_cnv__3u-eE {\n  display: none;\n}\n");var Ae=function(e){function t(){var p;return ce(this,t),de(ye(p=me(this,pe(t).call(this))),"start",function(){p.video.onloadeddata=function(e){var t=p.video,n=t.videoWidth,r=t.videoHeight;p.cnv.width=1024,p.cnv.height=n&&r?1024/p.video.videoWidth*p.video.videoHeight:576,p.ctx=p.cnv.getContext("2d"),p.cnv.beforeBlob=function(){p.ctx.clearRect(0,0,p.cnv.width,p.cnv.height),p.ctx.drawImage(p.video,0,0,p.cnv.width,p.cnv.height)};var i,o,a,s,c,u,l,d,f,h=(i=p.video,c=s=0,u=1,l=i.videoWidth,d=i.videoHeight,(f=l/d)<window.innerWidth/window.innerHeight?(u=(o=window.innerWidth)/l,a=o/f,s=window.innerHeight/2-a/2):(u=(a=window.innerHeight)/d,c=0-((o=a*f)/2-window.innerWidth/2)),{width:o,height:a,top:s,left:c,scale:u});p.props.view.setState({layout:h,canvas:p.cnv})},p.video.play()}),p.ctx=null,p}return he(t,a.Component),le(t,[{key:"componentWillMount",value:function(){var t=this;navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(function(e){t.video.srcObject=e,t.start()})}},{key:"render",value:function(){var t=this;return[a.createElement("video",{key:1,ref:function(e){return t.video=e},className:"styles_video__BKZ2H"}),a.createElement("canvas",{key:2,ref:function(e){return t.cnv=e},className:"styles_cnv__3u-eE"})]}}]),t}(),Be=e.connect(null,function(e){return{view:e.view}})(Ae);je(".styles_hudContainer__1-LDt {\n  position: absolute;\n  top: 0;\n  right: 0;\n  background-color: #17a2b8;\n  margin: 0;\n  padding: 0.5em;\n  color: #fff;\n}\n\n.styles_param__3Xor7 {\n  margin: 0 0 5px 0;\n  display: flex;\n  text-transform: initial;\n}\n\n.styles_paramKey__2r9DZ {\n  display: inline-block;\n  width: 40%;\n  margin-right: 10px;\n}\n\n.styles_paramValue__1w8jL {\n  display: inline-block;\n  margin-left: 10px;\n}\n");var He=function(e){function t(){var e;return ce(this,t),(e=me(this,pe(t).call(this))).state={data:{}},e}return he(t,n.Component),le(t,[{key:"componentDidMount",value:function(){var e=Oe()?Oe().appId:"Unknown";this.setState({data:fe({},this.state.data,{appId:e})})}},{key:"render",value:function(){var t=this;return a.createElement("div",{className:"styles_hudContainer__1-LDt"},Object.keys(this.state.data).map(function(e){return a.createElement("p",{className:"styles_param__3Xor7"},a.createElement("span",{className:"styles_paramKey__2r9DZ"},e,":")," ",a.createElement("span",{className:"styles_paramValue__1w8jL"},t.state.data[e]))}))}}]),t}();je(".styles_layout__3Dd9v {\n  width: 100vw;\n  height: 100vh;\n  padding: 0;\n  margin: 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  box-sizing: border-box;\n  overflow-y: hidden;\n  overflow-x: hidden;\n  font-family: sans-serif;\n  z-index: 2147483647;\n}\n");var We=function(){return a.createElement("div",{className:"styles_layout__3Dd9v"},a.createElement(Le,null),a.createElement(He,null),a.createElement(Fe,null),a.createElement(Be,null))},ze=e.connect(function(e){return fe({},e)})(function(e){function t(){var e;return ce(this,t),(e=me(this,pe(t).call(this))).state={show:!1},e.handleKBClick=e.handleKBClick.bind(ye(e)),e}return he(t,n.Component),le(t,[{key:"handleKBClick",value:function(e){e.ctrlKey&&e.altKey&&"z"==e.key&&!this.state.show&&this.setState({show:!0}),e.ctrlKey&&e.altKey&&"x"==e.key&&this.state.show&&this.setState({show:!1})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKBClick),document.addEventListener("keyup",this.handleKBClick),this.props.dispatch.vision.subscribe(),this.props.dispatch.cvEvents.subscribe()}},{key:"render",value:function(){return this.state.show?a.createElement(We,this.props):null}}]),t}());return function(){return a.createElement(e.Provider,{store:Pe},a.createElement(ze,null))}});
